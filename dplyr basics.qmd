---
title: "Dplyr Basics"
author: "Preye Indiamaowei"
format: html
embed-resources: true
---
```{r}
#| label: setup
#| message: false
#| include: false

library(tidyverse)
library(dplyr)
library(nycflights13)

```

# Problem 1

```{r}
glimpse(flights)
```

A smaller set `flights_sm` consisting only of destinations and the variables involving arrival/departure times and delays. Destinations are the first column of this data frame, followed by the departure variables, and finally the arrival variables.
```{r}
flights_sm <- flights %>% 
  select(dest,
         dep_time,
         sched_dep_time,
         dep_delay,
         arr_time,
         sched_arr_time,
         arr_delay)

glimpse(flights_sm)
```


# Problem 2
## A. All flights that flew to Boston or Atlanta.
```{r}
flights_bosatl <- flights_sm %>% 
  filter(dest == "BOS" |
           dest == "ATL")

glimpse(flights_bosatl)
```
## B. All flights that left at least an hour late but arrived early.
```{r}
flights_smaller <- flights_sm %>% 
  filter(dep_delay > 0,
         arr_delay < 0)

glimpse(flights_smaller)
```
## C. All flights that arrived between 1am and 7am, inclusive.

```{r}
flights_1to7 <- flights_sm %>%
  filter(between(arr_time, 1, 7))

glimpse(flights_1to7)
```

# Problem 3

## A. Sorted according to departure delay, breaking ties with arrival delay. Longest delays are first.
```{r}
flights_delay <- flights_sm %>%
  arrange(desc(dep_delay),
          desc(arr_delay))

glimpse(flights_delay)
```
## B. Missing departure times are first. 
```{r}
flights_missing_dep <- flights_sm %>%
  arrange(desc(is.na(dep_time)))

glimpse(flights_missing_dep)
```

# Problem 4

2 columns added to `flights_sm` showing the difference between delays in departure and arrival
 for each flight & indicating if the flight gained time while in the air.
```{r}
flights_delay_diff <- flights_sm %>% 
  mutate(delay_diff = dep_delay - arr_delay)

flights_delay_diff <- flights_delay_diff %>% 
  mutate(gained_time = delay_diff > 0)
  

glimpse(flights_delay_diff)
```

